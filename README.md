# ContentAI バックエンド

ContentAIは、縦スクロール型UIとパーソナライズされたコンテンツ推薦を提供するサービスのバックエンド実装です。Go言語とgRPCを使用し、クリーンアーキテクチャの原則に従って設計されています。

## プロジェクト構造

このプロジェクトはクリーンアーキテクチャに準拠し、以下の構造を持っています：

```
.
├── api/          # プロトコル定義（Protocol Buffersなど）
├── cmd/          # エントリーポイント
│   └── api/      # APIサーバーのエントリーポイント
├── internal/     # 内部パッケージ
│   ├── domain/       # ドメインモデル（エンティティと値オブジェクト）
│   ├── usecase/      # ユースケース（アプリケーションサービス）
│   ├── interface/    # インターフェース適応層（コントローラーとプレゼンター）
│   └── infrastructure/ # インフラストラクチャ層（データベースアクセスなど）
├── pkg/          # 公開パッケージ
└── test/         # テスト用ヘルパー
```

## 技術スタック

- Go 1.21+
- gRPC/Protocol Buffers
- PostgreSQL
- Redis
- Docker & Docker Compose
- GitHub Actions

## 開発環境のセットアップ

### 前提条件

- Go 1.21以上
- Docker & Docker Compose
- Make

### インストールと実行

```bash
# リポジトリのクローン
git clone https://github.com/Showhey798/ContentAI-go-backend.git
cd ContentAI-go-backend

# 依存関係のインストール
go mod download

# ローカルで実行
make run

# または、Dockerを使用して実行
make docker-run
```

### テスト実行

```bash
# すべてのテストを実行
make test

# カバレッジレポートの生成
make coverage
```

## アーキテクチャ概要

このプロジェクトはクリーンアーキテクチャに従って設計されており、以下のレイヤーを持っています：

1. **ドメインレイヤー**: ビジネスロジックのコア（エンティティ、値オブジェクト、ドメインサービス）
2. **ユースケースレイヤー**: アプリケーションのユースケース（インタラクター）
3. **インターフェースレイヤー**: コントローラー、プレゼンター、ゲートウェイ
4. **インフラストラクチャレイヤー**: データベース、外部APIなどの具体的な実装

各レイヤーは内側のレイヤーにのみ依存し、依存関係の逆転原則を用いて外部の詳細から内部のビジネスロジックを保護しています。

## APIドキュメント

APIドキュメントはgRPCサービス定義に基づいて生成されます。サーバー起動後、以下のURLでgRPC UIを使用してAPIをブラウズできます：

```
http://localhost:8082
```

## 貢献

開発に貢献する場合は、以下のガイドラインに従ってください：

1. 新しい機能のために新しいブランチを作成: `git checkout -b feature/your-feature-name`
2. テスト駆動開発（TDD）を実践: 先にテストを書き、実装はテストを通すことを目的に行う
3. コミット前に整形とリント: `make fmt && make lint`
4. Pull Requestを作成: 詳細な説明と変更点を含める

## ライセンス

このプロジェクトはプロプライエタリライセンスのもとで提供されています。詳細はリポジトリ管理者にお問い合わせください。
